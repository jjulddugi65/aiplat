<!DOCTYPE html>
<html lang="en">
<head>
Â  <meta charset="UTF-8" />
Â  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
Â  <title>FOR Pi MAXIMUM TRANSACTION (Full SDK Integrated)</title>

Â  Â  Â  Â  <script src="https://cdn.tailwindcss.com"></script>
Â  <script src="https://sdk.minepi.com/pi-sdk.js"></script>

Â  <style>
Â  Â  body {
Â  Â  Â  font-family: sans-serif;
Â  Â  Â  background: #f3f4f6;
Â  Â  Â  color: #1f2937;
Â  Â  Â  padding: 2rem 1rem;
Â  Â  }
Â  Â  .header {
Â  Â  Â  background: #1f2937;
Â  Â  Â  color: #fff;
Â  Â  Â  padding: 1.5rem;
Â  Â  Â  border-radius: 1rem;
Â  Â  Â  text-align: center;
Â  Â  Â  margin-bottom: 1.5rem;
Â  Â  }
Â  Â  .btn {
Â  Â  Â  padding: 0.75rem 1.5rem;
Â  Â  Â  border-radius: 0.5rem;
Â  Â  Â  font-weight: bold;
Â  Â  Â  border: none;
Â  Â  Â  cursor: pointer;
Â  Â  Â  transition: background-color 0.2s;
Â  Â  Â  width: 100%;
Â  Â  }
Â  Â  .btn-login { background: #f7a43b; color: white; }
Â  Â  .btn-login:hover { background: #e09133; }
Â  Â  .btn-pay { background: #4CAF50; color: white; }
Â  Â  .btn-pay:hover { background: #45A049; }
Â  Â  .msg {
Â  Â  Â  position: fixed;
Â  Â  Â  top: 1rem;
Â  Â  Â  left: 50%;
Â  Â  Â  transform: translateX(-50%) scale(0);
Â  Â  Â  background: #1f2937;
Â  Â  Â  color: #fff;
Â  Â  Â  padding: 0.75rem 1.5rem;
Â  Â  Â  border-radius: 0.5rem;
Â  Â  Â  transition: transform 0.3s;
Â  Â  Â  z-index: 999;
Â  Â  }
Â  Â  table {
Â  Â  Â  width: 100%;
Â  Â  Â  border-collapse: collapse;
Â  Â  Â  margin-top: 1rem;
Â  Â  }
Â  Â  th, td {
Â  Â  Â  border: 1px solid #e5e7eb;
Â  Â  Â  padding: 0.5rem;
Â  Â  Â  font-size: 0.8rem;
Â  Â  Â  text-align: center;
Â  Â  }
Â  </style>
</head>

<body>
Â  <div id="msg" class="msg">App Ready</div>

Â  <div class="header">
Â  Â  <h1 class="text-xl font-bold">FOR Pi MAXIMUM TRANSACTION</h1>
Â  Â  <p class="text-gray-300 text-sm mt-1">Pi SDK + Transaction Simulation</p>
Â  </div>

Â  <div class="max-w-3xl mx-auto bg-white p-6 rounded-xl shadow-lg">
Â  Â  <div class="grid grid-cols-2 gap-4 mb-4">
Â  Â  Â  <button id="btnLogin" class="btn btn-login">1ï¸âƒ£ Pi Login (Authenticate)</button>
Â  Â  Â  <button id="btnPay" class="btn btn-pay" disabled>2ï¸âƒ£ Create Payment</button>
Â  Â  </div>

Â  Â  <div class="grid grid-cols-2 gap-4 mb-4">
Â  Â  Â  <div>
Â  Â  Â  Â  <label>Amount (Pi):</label>
Â  Â  Â  Â  <input id="amount" type="number" step="0.0001" value="1.0000" class="border p-2 w-full rounded" />
Â  Â  Â  </div>
Â  Â  Â  <div>
Â  Â  Â  Â  <label>Task Type:</label>
Â  Â  Â  Â  <select id="task" class="border p-2 w-full rounded">
Â  Â  Â  Â  Â  <option value="Drawing">Drawing</option>
Â  Â  Â  Â  Â  <option value="Animation">Animation</option>
Â  Â  Â  Â  Â  <option value="VideoEdit">Video Edit</option>
Â  Â  Â  Â  Â  <option value="Research">Research</option>
Â  Â  Â  Â  </select>
Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <iframe
Â  Â  Â  src="https://blockexplorer.minepi.com/testnet/"
Â  Â  Â  title="Pi Testnet"
Â  Â  Â  frameborder="0"
Â  Â  Â  class="w-full h-40 border rounded mb-4"
Â  Â  ></iframe>

Â  Â  <table id="ledger">
Â  Â  Â  <thead>
Â  Â  Â  Â  <tr class="bg-gray-50">
Â  Â  Â  Â  Â  <th>ID</th>
Â  Â  Â  Â  Â  <th>Time</th>
Â  Â  Â  Â  Â  <th>Sender</th>
Â  Â  Â  Â  Â  <th>Smart Contract</th>
Â  Â  Â  Â  Â  <th>Amount</th>
Â  Â  Â  Â  Â  <th>Task</th>
Â  Â  Â  Â  Â  <th>Result</th>
Â  Â  Â  Â  </tr>
Â  Â  Â  </thead>
Â  Â  Â  <tbody></tbody>
Â  Â  </table>
Â  </div>

Â  <script>
Â  Â  // === CONFIG ===
Â  Â  // â­ YOUR-APP-KEY-HEREë¥¼ ê·€í•˜ì˜ ì•± í‚¤ë¡œ ëŒ€ì²´í–ˆìŠµë‹ˆë‹¤.
Â  Â  const APP_KEY = "ms2wkmzsv23ntgjfe0phadfszrs3waaaelusbzuu4iearyfz4qp1oymoyrj0feno"; 
Â  Â  const PUBLIC_TAX_RATE = 0.05, FIXED_FEE = 0.01;
Â  Â  let txID = 0, user = null, publicTaxPool = 0.0;

Â  Â  // === SDK INIT ===
Â  Â  document.addEventListener("DOMContentLoaded", () => {
Â  Â  Â  if (window.Pi) {
Â  Â  Â  Â  // sandbox: false ë¡œ ì‹¤ì œ Wallet ëª¨ë“œ ë° ì•± í‚¤ ì„¤ì •
Â  Â  Â  Â  Pi.init({ version: "2.0", sandbox: false, appKey: APP_KEY });
Â  Â  Â  Â  showMsg("âœ… Pi SDK Initialized (Wallet Mode)");
Â  Â  Â  } else {
Â  Â  Â  Â  showMsg("âŒ Pi SDK not found (Use Pi Browser)", false);
Â  Â  Â  }
Â  Â  });

Â  Â  // === Utility ===
Â  Â  const showMsg = (msg, ok = true) => {
Â  Â  Â  const box = document.getElementById("msg");
Â  Â  Â  box.textContent = msg;
Â  Â  Â  box.style.background = ok ? "#10b981" : "#f44336";
Â  Â  Â  box.style.transform = "translateX(-50%) scale(1)";
Â  Â  Â  setTimeout(() => (box.style.transform = "translateX(-50%) scale(0)"), 3000);
Â  Â  };

Â  Â  const addLedger = (sender, sc, amt, task, result) => {
Â  Â  Â  const t = new Date().toLocaleTimeString();
Â  Â  Â  const row = `<tr>
Â  Â  Â  Â  <td>${++txID}</td>
Â  Â  Â  Â  <td>${t}</td>
Â  Â  Â  Â  <td>${sender}</td>
Â  Â  Â  Â  <td>${sc}</td>
Â  Â  Â  Â  <td>${amt.toFixed(4)}</td>
Â  Â  Â  Â  <td>${task}</td>
Â  Â  Â  Â  <td>${result}</td>
Â  Â  Â  </tr>`;
Â  Â  Â  document.querySelector("#ledger tbody").insertAdjacentHTML("beforeend", row);
Â  Â  };

Â  Â  // === SDK Auth ===
Â  Â  document.getElementById("btnLogin").onclick = async () => {
Â  Â  Â  try {
Â  Â  Â  Â  const scopes = ["username"];
Â  Â  Â  Â  user = await Pi.authenticate(scopes, (p) => showMsg(`Incomplete payment: ${p.identifier}`, false));
Â  Â  Â  Â  showMsg(`âœ… Authenticated: ${user.username}`);
Â  Â  Â  Â  document.getElementById("btnPay").disabled = false;
Â  Â  Â  } catch (e) {
Â  Â  Â  Â  showMsg(`âŒ Auth failed: ${e}`, false);
Â  Â  Â  }
Â  Â  };

Â  Â  // === Payment ===
Â  Â  document.getElementById("btnPay").onclick = async () => {
Â  Â  Â  if (!user) return showMsg("Please log in first", false);

Â  Â  Â  const amount = parseFloat(document.getElementById("amount").value);
Â  Â  Â  const task = document.getElementById("task").value;
Â  Â  Â  if (amount < 0.01) return showMsg("Amount too small", false);

Â  Â  Â  showMsg(`ğŸ’° Requesting ${amount} Pi Payment...`, "warning");

Â  Â  Â  try {
Â  Â  Â  Â  const payment = await Pi.createPayment({
Â  Â  Â  Â  Â  amount,
Â  Â  Â  Â  Â  memo: "AI Smart Contract Execution",
Â  Â  Â  Â  Â  metadata: { task, username: user.username },
Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  // â­ ì½œë°± í•¨ìˆ˜ ëˆ„ë½ ì˜¤ë¥˜ë¥¼ í•´ê²°í•˜ëŠ” í•„ìˆ˜ ì½”ë“œ
Â  Â  Â  Â  Â  callbacks: {
Â  Â  Â  Â  Â  Â  onReadyForServerApproval: (pid) => showMsg(`Server Approval READY: ${pid}`, "warning"),
Â  Â  Â  Â  Â  Â  onReadyForServerCompletion: (pid, txid) => {
Â  Â  Â  Â  Â  Â  Â  showMsg(`âœ… Payment Finalized! TX: ${txid}`);
Â  Â  Â  Â  Â  Â  Â  simulateLedger(user.username, amount, task);
Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  onCancel: (pid) => showMsg(`âš ï¸ Cancelled: ${pid}`, false),
Â  Â  Â  Â  Â  Â  onError: (err) => showMsg(`âŒ Error: ${err.message}`, false),
Â  Â  Â  Â  Â  },
Â  Â  Â  Â  });
Â  Â  Â  } catch (e) {
Â  Â  Â  Â  showMsg(`âŒ Payment failed: ${e}`, false);
Â  Â  Â  }
Â  Â  };

Â  Â  // === Simulation ===
Â  Â  const simulateLedger = (sender, amt, task) => {
Â  Â  Â  const net = (amt - FIXED_FEE) / (1 + PUBLIC_TAX_RATE);
Â  Â  Â  const tax = net * PUBLIC_TAX_RATE;
Â  Â  Â  publicTaxPool += tax;

Â  Â  Â  addLedger(sender, "1st SC (Human)", amt, task, "CALLED");
Â  Â  Â  addLedger("SYSTEM (Fee)", "FIXED", -FIXED_FEE, "Network", "COLLECTED");
Â  Â  Â  addLedger("SYSTEM (Tax)", "PUBLIC TAX", -tax, "Public Fund", "ACCUMULATED");

Â  Â  Â  const res = Math.random() < 0.8 ? "SUCCESS" : "FAILURE";
Â  Â  Â  addLedger("AI Agent", "Process Task", net / 2, task, res);

Â  Â  Â  if (publicTaxPool >= 1.0) {
Â  Â  Â  Â  showMsg("AI auto-executes public tax (T3)", true);
Â  Â  Â  Â  publicTaxPool = 0.0;
Â  Â  Â  }
Â  Â  };
Â  </script>
</body>
</html>
